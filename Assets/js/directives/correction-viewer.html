<div>
	<i class="icon-time"></i> (=correctionInfo.creationDate | date:'medium'=) ((=correctionInfo.status | statusLabel=))
</div>

<div data-ng-switch="correctionInfo.status">

	<div data-ng-switch-when="DRAFT">
		<table class="table table-striped table-bordered">
			<caption>Liste des propriétés modifiées dans la correction</caption>
			<thead>
				<tr>
					<th scope="col">Propriété</th>
					<th scope="col">
						Valeur originale <span class="muted">(publiée)</span>
					</th>
					<th scope="col">
						<!-- label class="checkbox pull-right"><input type="checkbox" data-ng-model="advancedDiffs"/> Afficher les différences</label -->
						<button type="button" class="btn btn-mini btn-info pull-right"
							title="Afficher les changements"
							data-ng-click="advancedDiffs = ! advancedDiffs"
							data-ng-class="{'active': advancedDiffs}"><i class="icon-lightbulb"></i> Diff.</button>
						Valeur corrigée
					</th>
					<th scope="col" style="width:30px;text-align:center"><i class="icon-remove" title="Annuler des modifications"></i></th>
				</tr>
			</thead>
			<tbody>
				<tr data-ng-repeat="line in diff">
					<th scope="row">(=line.id=)</th>
					<td style="vertical-align: top">(=line.original=)</td>
					<td style="vertical-align: top" data-ng-switch="advancedDiffs">
						<div data-ng-switch-when="true" data-ng-bind-html-unsafe="line.current | diff:line.original"></div>
						<div data-ng-switch-when="false">(=line.current=)</div>
					</td>
					<td><button type="button" class="btn btn-small btn-danger" data-ng-click="cancelLine(line)" title="Annuler cette modification"><i class="icon-remove"></i></button>
				</tr>
			</tbody>
		</table>

		<div data-ng-init="applyCorrectionWhen = 'now'"></div>
		<div data-ng-show="diff.length > 0">
			<label class="radio">
				<input type="radio" name="applyCorrectionWhenOption" data-ng-model="applyCorrectionWhen" value="now" checked>
				Appliquer la correction maintenant.
			</label>
			<label class="radio">
				<input type="radio" name="applyCorrectionWhenOption" data-ng-model="applyCorrectionWhen" value="planned">
				Plannifier l'application la correction.
			</label>
			<date-selector data-ng-show="applyCorrectionWhen == 'planned'" data-ng-model="plannedCorrectionDate" name="plannedCorrectionDate"></date-selector>
		</div>

		<div>
			<a class="pull-right" href="Change/Admin/help/correction" help="#correctionHelpContainer"><i class="icon-info-sign"></i> Besoin d'aide à propos des corrections ?</a>
			<div class="clearfix"></div>
			<div id="correctionHelpContainer" class="hide"></div>
		</div>

		<div class="form-actions">
			<button type="button" data-ng-disabled="diff.length == 0" data-ng-show="applyCorrectionWhen == 'now'" class="btn btn-success btn-headline" data-ng-click="submitNow()"><i class="icon-download-alt"></i>Appliquer<small>la correction maintenant</small></button>
			<button type="button" data-ng-disabled="diff.length == 0" data-ng-hide="applyCorrectionWhen == 'now'" class="btn btn-primary btn-headline" data-ng-click="submitPlanned()"><i class="icon-time"></i>Plannifier<small>la correction</small></button>
			<button type="button" class="btn btn-danger btn-headline" data-ng-click="deleteCorrection()"><i class="icon-trash"></i>Supprimer<small>la correction</small></button>

			<button type="button" class="btn btn-headline pull-right" data-ng-click="cancelChanges()" data-ng-disabled="! hasChanges()"><i class="icon-undo"></i>Annuler<small>les modifications</small></button>
			<button type="button" class="btn btn-headline pull-right" data-ng-click="saveChanges()" data-ng-disabled="! hasChanges()"><i class="icon-ok"></i>Mettre à jour<small>la correction</small></button>
		</div>

	</div>

	<div data-ng-switch-when="VALIDATION">
		<div class="alert alert-info">
			Cette Correction est <strong>en cours de validation</strong> : elle ne peut être modifiée, ni supprimée.
		</div>

		<div class="form-actions">
			<button type="button" class="btn btn-primary btn-headline" data-ng-click="publish()"><i class="icon-ok"></i>Publier<small>la correction</small></button>
		</div>
	</div>

	<div data-ng-switch-when="PUBLISHABLE">
		<div class="alert alert-info">
			Cette Correction va être appliquée : elle ne peut être modifiée, ni supprimée.
		</div>
	</div>

	<div data-ng-switch-when="FILED">
		<div class="alert alert-success">
			Cette Correction a été appliquée sur le document.
		</div>
	</div>

</div>






